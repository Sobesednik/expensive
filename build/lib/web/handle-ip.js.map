{"version":3,"sources":["../../../src/lib/web/handle-ip.js"],"names":["LOG","handleIp","message","phone","user","name","appName","props","includes","Number","authComplete","rcPath"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;AAEA,MAAMA,MAAM,oBAAS,WAAT,CAAZ;;AACA,MAAMC,WAAW,OAAO;AACtBC,SADsB;AAEtBC,OAFsB;AAGtBC,MAHsB;AAItBC,QAAMC,OAJgB;AAKtBC,UAAQ;AALc,IAMpB,EANa,KAMN;AACT,MAAI,CAAC,CAAC,OAAD,EAAU,CAAV,EAAaC,QAAb,CAAsBD,MAAME,MAA5B,CAAL,EAA0C;AACxC;AACD;;AAED,QAAMC,eAAe,MAAM,8BAAgBR,OAAhB,EAAyB;AAAEI,WAAF;AAAWH,SAAX;AAAkBC;AAAlB,GAAzB,CAA3B;;AACA,MAAIM,iBAAiB,IAArB,EAA2B;AACzB;AACA;AACA,UAAMC,SAAS,mBAAQ,kBAAR,EAAoB,IAAGL,OAAQ,IAA/B,CAAf;AACAN,QAAI,eAAJ,EAAqBW,MAArB;AACA,UAAM,oBAAMA,MAAN,CAAN;AACA,WAAO,IAAP;AACD;AACF,CApBD;;eAsBeV,Q","sourcesContent":["import bosom from 'bosom'\nimport { homedir } from 'os'\nimport { resolve } from 'path'\nimport { debuglog } from 'util'\nimport handleRequestIP from './handle-request-ip'\n\nconst LOG = debuglog('expensive')\nconst handleIp = async ({\n  message,\n  phone,\n  user,\n  name: appName,\n  props = {},\n} = {}) => {\n  if (![1011150, 1].includes(props.Number)) {\n    return\n  }\n\n  const authComplete = await handleRequestIP(message, { appName, phone, user })\n  if (authComplete === true) {\n    // update the configuration to reflect the IP\n    // modify `africa` to be able to update the configuration\n    const rcPath = resolve(homedir(), `.${appName}rc`)\n    LOG('writing to %s', rcPath)\n    await bosom(rcPath)\n    return true\n  }\n}\n\nexport default handleIp\n"],"file":"handle-ip.js"}